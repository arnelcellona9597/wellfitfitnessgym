import{X as F,r as n,j as e}from"./app-QxuAwUI4.js";import{M as L}from"./Head-BAhpCBSm.js";import{H,F as $}from"./Footer-DmZ0NqbW.js";import"./Helmet-B22VUIBA.js";function R(){const{get_user_membership:b,get_user_booktrainor:f}=F().props,[i,o]=n.useState(1),[l,h]=n.useState(1),[a]=n.useState(5),[d,g]=n.useState(""),[m,S]=n.useState(""),[X,u]=n.useState(null);n.useState(null);const[q,C]=n.useState(null),[J,T]=n.useState(null),j=b.filter(t=>t.plan_name.toLowerCase().includes(d.toLowerCase())),x=f.filter(t=>t.trainer_name.toLowerCase().includes(m.toLowerCase())),p=i*a,N=p-a,w=j.slice(N,p),M=Math.ceil(j.length/a),y=l*a,v=y-a,P=x.slice(v,y),O=Math.ceil(x.length/a),_=t=>o(t),k=t=>h(t),A=async t=>{var r;C(t);try{const s=await fetch(`/member/account-history/member-booktrainor-cancel?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({id:t})}),c=await s.json();s.ok&&(alert("Successfully cancelled."),window.location.href="/member/account-history")}catch(s){console.error("Error submitting:",s)}},D=async t=>{var r;T(t);try{const s=await fetch(`/member/account-history/member-booktrainor-delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({id:t})}),c=await s.json();s.ok&&(alert("successfully deleted."),window.location.href="/member/account-history")}catch(s){console.error("Error submitting:",s)}},E=async t=>{var r;u(t);try{const s=await fetch(`/member/account-history/member-plan-cancel?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({plan_id:t})}),c=await s.json();s.ok&&(alert("Successfully cancelled."),window.location.href="/member/account-history")}catch(s){console.error("Error submitting:",s)}},B=async t=>{var r;u(t);try{const s=await fetch(`/member/account-history/member-plan-delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({plan_id:t})}),c=await s.json();s.ok&&(alert("Membership has been successfully deleted."),window.location.href="/member/account-history")}catch(s){console.error("Error submitting:",s)}};return e.jsxs("section",{className:"gym-section",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Account History"}),e.jsx("h2",{children:"The data below shows your previous membership plans and class booking history."})]}),e.jsxs("div",{className:"gym-container",children:[e.jsxs("div",{className:"gym-column",children:[e.jsxs("div",{className:"Theader",children:[e.jsx("h2",{children:"Gym Membership Plan"}),e.jsx("input",{type:"text",placeholder:"Search",value:d,onChange:t=>{g(t.target.value),o(1)}})]}),e.jsxs("table",{className:"gym-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Plan"}),e.jsx("th",{children:"Total Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Option"})]})}),e.jsx("tbody",{children:w.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.plan_name}),e.jsxs("td",{children:["₱",parseInt(t.plan_price).toLocaleString()]}),e.jsx("td",{children:t.status}),e.jsxs("td",{children:[t.status==="Pending"&&e.jsx("a",{className:"cancelMembership",href:"#",onClick:r=>{r.preventDefault(),E(t.id)},children:"Cancel"}),t.status==="Cancelled"&&e.jsx("a",{className:"MemberPlanDelete",href:"#",onClick:r=>{r.preventDefault(),B(t.id)},children:"Delete"}),e.jsx("a",{href:`/member/account-history/membership?id=${t.id}`,children:" View "})]})]},t.id))})]}),e.jsx("div",{className:"pagination",children:Array.from({length:M},(t,r)=>e.jsx("button",{onClick:()=>_(r+1),className:i===r+1?"active":"",children:r+1},r+1))})]}),e.jsxs("div",{className:"gym-column",children:[e.jsxs("div",{className:"Theader",children:[e.jsx("h2",{children:"Booking for Gym Trainer"}),e.jsx("input",{type:"text",placeholder:"Search",value:m,onChange:t=>{S(t.target.value),h(1)}})]}),e.jsxs("table",{className:"gym-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Trainer"}),e.jsx("th",{children:"Total Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Option"})]})}),e.jsx("tbody",{children:P.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.trainer_name}),e.jsxs("td",{children:["₱",parseInt(t.trainer_total_price).toLocaleString()]}),e.jsx("td",{children:t.trainer_status}),e.jsxs("td",{children:[t.trainer_status=="Pending"&&e.jsx("a",{className:"cancelBookTrainor",href:"#",onClick:r=>{r.preventDefault(),A(t.id)},children:"Cancel"}),t.trainer_status=="Cancelled"&&e.jsx("a",{className:"deleteBookTrainor",href:"#",onClick:r=>{r.preventDefault(),D(t.id)},children:"Delete"}),e.jsx("a",{href:`/member/account-history/trainor?id=${t.id}`,children:" View "})]})]},t.id))})]}),e.jsx("div",{className:"pagination",children:Array.from({length:O},(t,r)=>e.jsx("button",{onClick:()=>k(r+1),className:l===r+1?"active":"",children:r+1},r+1))})]})]})]})}function z(){return e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsx(H,{}),e.jsx(R,{}),e.jsx($,{})]})}export{z as default};
