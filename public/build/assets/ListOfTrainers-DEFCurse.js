import{X as N,r as o,j as e}from"./app-AUHesruL.js";import{A as b,a as v,b as y,c as w}from"./Footer-BmT-CBLY.js";import{X as T}from"./index.es-Vtgx_LNy.js";import"./Helmet-B6nUBcye.js";const I=()=>{const{trainers:l}=N().props,[c,d]=o.useState(""),[t,s]=o.useState({trainerName:"",trainerImage:"",trainerLogDescription:"",trainerId:""}),[m,h]=o.useState(null),u=[{name:"Image",selector:r=>e.jsx("img",{src:`/template/images/${r.trainer_image}`,alt:"Trainer",style:{width:"50px"}}),sortable:!0},{name:"Trainer Name",selector:r=>`${r.trainer_name}`,sortable:!0},{name:"Description",selector:r=>`${r.log_description||"N/A"}`,sortable:!0},{name:"Option",cell:r=>e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),x(r.id)},children:"Edit"})," | ",e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),f(r.id)},children:"Delete"})]})}],p=async r=>{var i;if(r.preventDefault(),!m){alert("No trainer selected to edit.");return}const a=new FormData;a.append("id",t.trainerId),a.append("trainer_name",t.trainerName),a.append("log_description",t.trainerLogDescription),t.trainerImage instanceof File&&a.append("trainer_image",t.trainerImage),console.log(t.trainerId+" : "+t.trainerName+" : "+t.trainerImage);try{const n=await fetch("/admin/book-trainer/add-trainer/edit",{method:"POST",headers:{"X-CSRF-TOKEN":(i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content")},body:a}),j=await n.json();console.log(j),n.ok?(alert("Updated successfully."),window.location.href="/admin/book-trainer/trainer-list/"):alert("Failed to update.")}catch(n){console.error("Update failed:",n)}},x=r=>{h(r);const a=l.find(i=>i.id===r);a&&s({trainerName:a.trainer_name||"",trainerLogDescription:a.log_description||"",trainerImage:"",trainerId:a.id||""})},f=async r=>{var i;if(console.log("Delete membership with ID:",r),!!window.confirm("Are you sure you want to delete this trainer?"))try{(await fetch(`/admin/book-trainer/add-trainer/delete?id=${r}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content")},body:JSON.stringify({id:r})})).ok?(alert("Successfully deleted."),window.location.href="/admin/book-trainer/trainer-list/"):alert("Failed to delete membership.")}catch(n){console.error("Error submitting:",n)}},g=l.filter(r=>{const a=r.trainer_name.toLowerCase(),i=r.trainer_image.toLowerCase();return a.includes(c.toLowerCase())||i.includes(c.toLowerCase())});return e.jsxs("div",{children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"List Of Trainers"}),e.jsx(T,{columns:u,data:g,pagination:!0,highlightOnHover:!0,subHeader:!0,subHeaderComponent:e.jsx("input",{type:"text",placeholder:"Search",onChange:r=>d(r.target.value),style:{width:"100%",margin:"0"}})})]})})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Edit Trainer"}),e.jsxs("form",{onSubmit:p,encType:"multipart/form-data",children:[e.jsx("input",{type:"hidden",id:"trainerId",name:"trainerId",className:"form-control",value:t.trainerId,onChange:r=>s({...t,trainerId:r.target.value})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"trainerName",className:"col-sm-2 col-form-label",children:"Trainer Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"trainerName",name:"trainerName",className:"form-control",value:t.trainerName,onChange:r=>s({...t,trainerName:r.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"trainerLogDescription",className:"col-sm-2 col-form-label",children:"Description"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"trainerLogDescription",name:"trainerLogDescription",className:"form-control",value:t.trainerLogDescription,onChange:r=>s({...t,trainerLogDescription:r.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"trainerImage",className:"col-sm-2 col-form-label",children:"Trainer Image"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"file",id:"trainerImage",name:"trainerImage",className:"form-control",onChange:r=>s({...t,trainerImage:r.target.files[0]})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})]})})})]})};function F(){return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(v,{}),e.jsx(y,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"List of all Trainers"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Proffessional Trainers"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(I,{})})]}),e.jsx(w,{})]})}export{F as default};
