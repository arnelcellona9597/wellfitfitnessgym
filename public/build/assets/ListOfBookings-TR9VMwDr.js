import{X as f,r as p,j as t}from"./app-DBAGK7IV.js";import{A as b,a as j,b as x,c as y}from"./Footer-CgUffekk.js";import{h as o}from"./moment-C5S46NFB.js";import{X as g}from"./index.es-DacanCkV.js";import"./Helmet-C-R_2MwY.js";const C=()=>{const{get_all_user_booktrainor:i}=f().props,[s,l]=p.useState(""),c=[{name:"Member Name",selector:e=>`${e.first_name} ${e.last_name}`,sortable:!0},{name:"Plan Name",selector:e=>e.trainer_name,sortable:!0},{name:"Start Date",selector:e=>e.trainer_start_date?o(e.trainer_start_date).format("MMMM D, YYYY"):"N/A",sortable:!0},{name:"End Date",selector:e=>e.trainer_end_date?o(e.trainer_end_date).format("MMMM D, YYYY"):"N/A",sortable:!0},{name:"Status",selector:e=>e.trainer_status,sortable:!0},{name:"Option",cell:e=>t.jsxs(t.Fragment,{children:[t.jsx("a",{href:`/admin/book-trainer/view-booking-details/?id=${e.id}`,children:"View"}),e.trainer_status==="Pending"?t.jsxs(t.Fragment,{children:[" | ",t.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),m(e.id)},children:"Approve"})," | ",t.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),d(e.id)},children:"Cancel"})]}):null,e.trainer_status==="Cancelled"?t.jsxs(t.Fragment,{children:[" | ",t.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),u(e.id)},children:"Delete"})]}):null]})}],d=async e=>{var n;if(console.log("Cancelling membership with ID:",e),!!window.confirm("Are you sure you want to cancel this membership?"))try{(await fetch(`/member/account-history/member-booktrainor-cancel?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content")},body:JSON.stringify({id:e})})).ok?(alert("Successfully canceled."),window.location.href="/admin/book-trainer/booking-list/"):alert("Failed to cancel membership.")}catch(a){console.error("Error submitting:",a)}},m=async e=>{var n;if(console.log("Approve membership with ID:",e),!!window.confirm("Are you sure you want to approve this membership?"))try{(await fetch(`/admin/book-trainer/booking-list/approve?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content")},body:JSON.stringify({id:e})})).ok?(alert("Successfully approved."),window.location.href="/admin/book-trainer/booking-list/"):alert("Failed to approve membership.")}catch(a){console.error("Error submitting:",a)}},u=async e=>{var n;if(console.log("Delete membership with ID:",e),!!window.confirm("Are you sure you want to delete this membership?"))try{(await fetch(`/member/account-history/member-booktrainor-delete?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content")},body:JSON.stringify({id:e})})).ok?(alert("Successfully deleted."),window.location.href="/admin/book-trainer/booking-list/"):alert("Failed to delete membership.")}catch(a){console.error("Error submitting:",a)}},h=i.filter(e=>{const r=`${e.first_name} ${e.last_name}`.toLowerCase(),n=e.trainer_name.toLowerCase(),a=e.trainer_status.toLowerCase();return r.includes(s.toLowerCase())||n.includes(s.toLowerCase())||a.includes(s.toLowerCase())});return t.jsx("div",{children:t.jsx("div",{className:"col-12",children:t.jsx("div",{className:"card recent-sales overflow-auto",children:t.jsxs("div",{className:"card-body",children:[t.jsx("h5",{className:"card-title",children:"List Of All Bookings"}),t.jsx(g,{columns:c,data:h,pagination:!0,highlightOnHover:!0,subHeader:!0,subHeaderComponent:t.jsx("input",{type:"text",placeholder:"Search",onChange:e=>l(e.target.value),style:{width:"100%",margin:"0"}})})]})})})})};function _(){return t.jsxs(t.Fragment,{children:[t.jsx(b,{}),t.jsx(j,{}),t.jsx(x,{}),t.jsxs("main",{id:"main",className:"main",children:[t.jsxs("div",{className:"pagetitle",children:[t.jsx("h1",{children:"Bookings List"}),t.jsx("nav",{children:t.jsxs("ol",{className:"breadcrumb",children:[t.jsx("li",{className:"breadcrumb-item",children:t.jsx("a",{href:"#",children:"Home"})}),t.jsx("li",{className:"breadcrumb-item active",children:"List of all Bookings"})]})})]}),t.jsx("section",{className:"section dashboard",children:t.jsx(C,{})})]}),t.jsx(y,{})]})}export{_ as default};
