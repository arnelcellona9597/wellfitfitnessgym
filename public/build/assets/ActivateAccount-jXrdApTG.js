import{X as S,r as a,j as e}from"./app-CMSVI-JE.js";import{M as b}from"./Head-C_Aio00y.js";import"./Helmet-CMBpA21e.js";function A(){const{email:h,verification_code:g}=S().props,[t,i]=a.useState({verification_code:g||"",email:h||""}),[s,c]=a.useState({}),[o,r]=a.useState(""),[x,j]=a.useState(!0),[l,d]=a.useState(!1),v=n=>{i({...t,[n.target.name]:n.target.value})},p=async n=>{var u;n.preventDefault(),c({}),r(""),d(!0);const{confirmation_code:N,verification_code:m,email:y}=t;try{if(m===N){const _=await(await fetch("/activate-account",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.getAttribute("content")},body:JSON.stringify(t)})).json();r("Account activated successfully! Redirecting to login page..."),setTimeout(()=>{window.location.href="/signin/"},3e3),i({verification_code:m||"",email:y||""}),j(!1)}else c({general:"Wrong verification code"})}catch(f){console.error("Error during activation:",f),c({general:"An error occurred while activating the account."})}finally{d(!1)}};return e.jsx(e.Fragment,{children:e.jsx("span",{className:"bg-img-v-2",children:e.jsx("section",{className:"section-404",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"text-404",children:[e.jsx("h1",{children:"Activate Account"}),e.jsx("h3",{children:"Enter your verification code"}),e.jsx("p",{children:"Enter the verification code sent to your email to activate your account."}),s.general&&e.jsx("p",{className:"alert alert-danger",children:s.general}),o&&e.jsx("p",{className:"alert alert-success",children:o}),x&&e.jsxs("form",{onSubmit:p,className:"search-404",children:[e.jsx("input",{type:"hidden",name:"verification_code",value:t.verification_code}),e.jsx("input",{type:"hidden",name:"email",value:t.email}),e.jsx("input",{type:"text",name:"confirmation_code",placeholder:"Enter Verification Code...",value:t.confirmation_code,onChange:v,required:!0}),s.confirmation_code&&e.jsx("p",{className:"text-danger",children:s.confirmation_code}),e.jsx("br",{}),e.jsxs("button",{type:"submit",className:"color-white",disabled:l,children:[e.jsx("i",{className:"fa fa-sign-in"})," ",l?"Authenticating ...":"Activate Account"]})]}),e.jsxs("a",{href:"/signin",className:"fs-11 color-orange",children:[e.jsx("i",{className:"fa fa-sign-in"})," Already have an account? Sign In"]}),e.jsx("br",{}),e.jsxs("a",{href:"/forgot",className:"fs-11 color-orange",children:[e.jsx("i",{className:"fa fa-question"})," Forgot Account?"]}),e.jsx("br",{}),e.jsxs("a",{href:"/",className:"fs-11 color-orange",children:[e.jsx("i",{className:"fa fa-home"})," Home Page"]})]})})})})})})})}function C(){return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(A,{})]})}export{C as default};
