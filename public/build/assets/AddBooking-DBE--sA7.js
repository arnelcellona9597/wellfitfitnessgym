import{X as _,r as t,j as e}from"./app-AUHesruL.js";import{A as T,a as M,b as D,c as y}from"./Footer-BmT-CBLY.js";import{d as k}from"./dayjs.min-Diql2XMf.js";import"./Helmet-B6nUBcye.js";const w=()=>{const{all_users:m,trainers:o}=_().props,[l,d]=t.useState(""),[r,h]=t.useState(""),[u,x]=t.useState("8:00am - 9:30am"),[i,j]=t.useState(""),[n,p]=t.useState("1 Month"),[b,A]=t.useState(""),v=async()=>{var c;if(l===""||r===""){alert("Please fill the form before submitting.");return}if(!o.find(s=>s.id==r)){alert("Selected trainer not found.");return}const f=parseInt(n),N=k(i).add(f,"month"),g=parseInt(n)*2e3;try{const s=await fetch("/trainer-over-the-counter-payment",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content")},body:JSON.stringify({trainer_user_id:l,trainer_id:r,trainer_payment_method:"Over The Counter",trainer_status:"Approved",trainer_duration:n,trainer_time_schedule:u,trainer_total_price:g,trainer_start_date:i,trainer_end_date:N.format("YYYY-MM-DD")})});if(s.ok)alert("Bookings has been successfully created."),window.location.href="/admin/book-trainer/booking-list/";else{const S=await s.json();setErrors({general:S.message||"Error submitting!"});return}}catch(s){console.error("Error submitting:",s),setErrors({general:"Something went wrong. Please try again!"});return}};return e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Select a member account and trainer to book a class session."}),e.jsxs("form",{children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select an Account:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"user_id",value:l,onChange:a=>d(a.target.value),children:[e.jsx("option",{children:"Select an Account"}),m.map(a=>e.jsxs("option",{value:a.id,children:[a.first_name," ",a.last_name]},a.id))]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Membership Trainer:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"trainer_id",value:r,onChange:a=>h(a.target.value),children:[e.jsx("option",{children:"Select Membership Trainer"}),o.map(a=>e.jsx("option",{value:a.id,children:a.trainer_name},a.id))]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Time Schedule:"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{className:"trainer_start_date form-select",value:i,onChange:a=>j(a.target.value),type:"date",min:b})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Time Schedule:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"trainer_time_schedule",value:r,onChange:a=>x(a.target.value),children:[e.jsx("option",{value:"8:00am - 9:30am",children:"8:00am - 9:30am"}),e.jsx("option",{value:"9:30am - 11:00am",children:"9:30am - 11:00am"}),e.jsx("option",{value:"11:00am - 12:30pm",children:"11:00am - 12:30pm"}),e.jsx("option",{value:"12:30pm - 2:00pm",children:"12:30pm - 2:00pm"}),e.jsx("option",{value:"2:00pm - 3:30pm",children:"2:00pm - 3:30pm"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label",children:"Select Duration:"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{className:"trainer_duration form-select",name:"trainer_duration",value:n,onChange:a=>p(a.target.value),children:[e.jsx("option",{selected:!0,value:"1 Month",children:"1 Month"}),e.jsx("option",{value:"3 Months",children:"3 Months"}),e.jsx("option",{value:"6 Months",children:"6 Months"}),e.jsx("option",{value:"12 Months",children:"12 Months"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("button",{type:"submit",className:"btn btn-primary",onClick:a=>{a.preventDefault(),v()},children:"Submit"})})]})]})]})})};function F(){return e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsx(M,{}),e.jsx(D,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"Add Booking for Trainers"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Add Booking for Trainer"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(w,{})})]}),e.jsx(y,{})]})}export{F as default};
