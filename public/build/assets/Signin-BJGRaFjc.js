import{r as a,j as e}from"./app-C2mka5Qm.js";import{M as S}from"./Head-DzkyONrH.js";import"./Helmet-Ds0eI-oq.js";function b(){const[r,i]=a.useState({email:"",password:""}),[l,n]=a.useState({}),[c,m]=a.useState(""),[f,p]=a.useState(!0),[d,u]=a.useState(!1),g=t=>{i({...r,[t.target.name]:t.target.value})},j=async t=>{var h;t.preventDefault(),n({}),m(""),u(!0);try{const s=await fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content")},body:JSON.stringify(r)});if(!s.ok){const x=await s.json();n({general:x.message||"Wrong email or password!"});return}const o=await s.json();console.log(o),o.email_verified_at===null?(console.log("Email is not verified"),n({general:"Please verify your email before logging in."})):(m("Successfully logged in! Redirecting to dashboard..."),i({email:"",password:""}),p(!1),setTimeout(()=>{o.type=="Administrator"?window.location.href="/admin/":window.location.href="/member/"},3e3))}catch(s){console.error("Error during activation:",s),n({general:"Wrong email or password!"})}finally{u(!1)}};return e.jsx(e.Fragment,{children:e.jsx("span",{className:"bg-img-v-1",children:e.jsx("section",{className:"section-404",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"text-404",children:[e.jsx("h1",{children:"Sign In"}),e.jsx("h3",{children:"Sign In to Access Your Fitness Journey"}),e.jsx("p",{children:"Sign in to your fitness account to manage your training plans, book classes, and monitor your progress today."}),l.general&&e.jsx("p",{className:"alert alert-danger",children:l.general}),c&&e.jsx("p",{className:"alert alert-success",children:c}),f&&e.jsxs("form",{onSubmit:j,className:"search-404",children:[e.jsx("input",{type:"email",name:"email",value:r.email,onChange:g,placeholder:"Enter email...",required:!0}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:g,placeholder:"Enter password...",required:!0}),e.jsx("br",{}),e.jsxs("button",{type:"submit",className:"color-white",disabled:d,children:[e.jsx("i",{className:"fa fa-sign-in"})," ",d?"Authenticating ...":"Signin"]})]}),e.jsxs("a",{href:"/signup",className:"fs-11 color-orange mb-3",children:[e.jsx("i",{className:"fa fa-plus"})," Don't have an account? Sign Up"]})," ",e.jsx("br",{}),e.jsxs("a",{href:"/forgot",className:"fs-11 color-orange mb-3",children:[e.jsx("i",{className:"fa fa-question"})," Forgot Account?"]}),e.jsx("br",{}),e.jsxs("a",{href:"/",className:"fs-11 color-orange",children:[e.jsx("i",{className:"fa fa-home"})," Home Page "]})]})})})})})})})}function v(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(b,{})]})}export{v as default};
