import{X as f,r as l,j as e}from"./app-C2mka5Qm.js";import{A as N,a as b,b as g,c as I}from"./Footer-CU9aL7Lk.js";import"./moment-C5S46NFB.js";import{X as w}from"./index.es-D8tufV7e.js";import"./Helmet-Ds0eI-oq.js";const D=()=>{const{get_all_inventory_items:c}=f().props,[o,m]=l.useState(""),[i,s]=l.useState({inventoryName:"",inventoryDescription:"",inventoryQuantity:"",inventoryImage:"",inventoryId:""}),[d,y]=l.useState(null),v=[{name:"Image",selector:t=>e.jsx("img",{src:`/template/images/${t.inventory_image}`,alt:"Trainer",style:{width:"50px"}}),sortable:!0},{name:"Name",selector:t=>`${t.inventory_name}`,sortable:!0},{name:"Description",selector:t=>`${t.inventory_description}`,sortable:!0},{name:"Quantity",selector:t=>`${t.inventory_quantity}`,sortable:!0},{name:"Option",cell:t=>e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),h(t.id)},children:"Edit"})," | ",e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),p(t.id)},children:"Delete"})]})}],u=async t=>{var r;if(t.preventDefault(),!d){alert("No selected to edit.");return}const n=new FormData;n.append("id",i.inventoryId),n.append("inventory_name",i.inventoryName),n.append("inventory_description",i.inventoryDescription),n.append("inventory_quantity",i.inventoryQuantity),i.inventoryImage instanceof File&&n.append("inventory_image",i.inventoryImage);try{const a=await fetch("/admin/inventory/add-item/edit",{method:"POST",headers:{"X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:n}),j=await a.json();console.log(j),a.ok?(alert("Updated successfully."),window.location.href="/admin/inventory/list-item"):alert("Failed to update.")}catch(a){console.error("Update failed:",a)}},h=t=>{y(t);const n=c.find(r=>r.id===t);n&&s({inventoryName:n.inventory_name||"",inventoryDescription:n.inventory_description||"",inventoryQuantity:n.inventory_quantity||"",inventoryImage:"",inventoryId:n.id||""})},p=async t=>{var r;if(console.log("Delete membership with ID:",t),!!window.confirm("Are you sure you want to delete this item?"))try{(await fetch(`/admin/inventory/add-item/delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({id:t})})).ok?(alert("Successfully deleted."),window.location.href="/admin/inventory/list-item"):alert("Failed to delete.")}catch(a){console.error("Error submitting:",a)}},x=c.filter(t=>{const n=t.inventory_name.toLowerCase(),r=t.inventory_description.toLowerCase(),a=t.inventory_quantity.toLowerCase();return n.includes(o.toLowerCase())||r.includes(o.toLowerCase())||a.includes(o.toLowerCase())});return e.jsxs("div",{children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"List Of Items"}),e.jsx(w,{columns:v,data:x,pagination:!0,highlightOnHover:!0,subHeader:!0,subHeaderComponent:e.jsx("input",{type:"text",placeholder:"Search",onChange:t=>m(t.target.value),style:{width:"100%",margin:"0"}})})]})})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Edit Item"}),e.jsxs("form",{onSubmit:u,encType:"multipart/form-data",children:[e.jsx("input",{type:"hidden",id:"inventoryId",name:"inventoryId",className:"form-control",value:i.inventoryId,onChange:t=>s({...i,inventoryId:t.target.value})}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"inventoryName",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"inventoryName",name:"inventoryName",className:"form-control",value:i.inventoryName,onChange:t=>s({...i,inventoryName:t.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"inventoryDescription",className:"col-sm-2 col-form-label",children:"Description"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("textarea",{type:"description",id:"inventoryDescription",name:"inventoryDescription",className:"form-control",value:i.inventoryDescription,onChange:t=>s({...i,inventoryDescription:t.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"inventoryQuantity",className:"col-sm-2 col-form-label",children:"Quantity"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"inventoryQuantity",name:"inventoryQuantity",className:"form-control",value:i.inventoryQuantity,onChange:t=>s({...i,inventoryQuantity:t.target.value})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"inventoryImage",className:"col-sm-2 col-form-label",children:"Image"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"file",id:"inventoryImage",name:"inventoryImage",className:"form-control",onChange:t=>s({...i,inventoryImage:t.target.files[0]})})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})]})})})]})};function E(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(b,{}),e.jsx(g,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"List of Item"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"List of Items in Inventory"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(D,{})})]}),e.jsx(I,{})]})}export{E as default};
