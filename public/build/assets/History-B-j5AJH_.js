import{X as h,r,j as e}from"./app-DBAGK7IV.js";import{A as u,a as p,b as x,c as j}from"./Footer-CgUffekk.js";import{X as f}from"./index.es-DacanCkV.js";import{h as g}from"./moment-C5S46NFB.js";import"./Helmet-C-R_2MwY.js";const y=()=>{const{get_logs:o}=h().props,[n,c]=r.useState("");r.useState({logDescription:"",logDate:"",logId:""}),r.useState(null);const l=[{name:"Description",selector:t=>t.first_name+" "+t.last_name+" "+t.log_description,sortable:!0},{name:"Date",selector:t=>g(t.log_date).format("MMMM D, YYYY"),sortable:!0},{name:"Option",cell:t=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),d(t.id)},children:"Delete"})})}],d=async t=>{var i;if(window.confirm("Are you sure you want to delete this log?"))try{(await fetch(`/admin/history/delete?id=${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content")},body:JSON.stringify({id:t})})).ok?(alert("Successfully deleted."),window.location.href="/admin/history"):alert("Failed to delete.")}catch(a){console.error("Error submitting:",a)}},m=o.filter(t=>`${t.first_name} ${t.last_name} ${t.log_description}`.toLowerCase().includes(n.toLowerCase()));return e.jsx("div",{children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card recent-sales overflow-auto",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Activity History / Logs"}),e.jsx(f,{columns:l,pagination:!0,data:m,highlightOnHover:!0,subHeader:!0,subHeaderComponent:e.jsx("input",{type:"text",placeholder:"Search",onChange:t=>c(t.target.value),style:{width:"100%",margin:"0"}})})]})})})})};function A(){return e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx(p,{}),e.jsx(x,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"History"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Activity logs"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(y,{})})]}),e.jsx(j,{})]})}export{A as default};
