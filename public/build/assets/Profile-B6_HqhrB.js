import{X as U,r as a,j as e}from"./app-DBAGK7IV.js";import{A as q,a as D,b as G,c as H}from"./Footer-CgUffekk.js";import"./Helmet-C-R_2MwY.js";const M=()=>{const{user_data_by_get_request:l,id:_}=U().props,[t,m]=a.useState(""),[i,d]=a.useState(""),[h,p]=a.useState(""),[x,f]=a.useState(""),[u,j]=a.useState(""),[N,b]=a.useState(""),[v,w]=a.useState(""),[c,g]=a.useState(""),[P,y]=a.useState(""),[o,C]=a.useState(!1),[F,A]=a.useState(null);a.useEffect(()=>{l&&(m(l.first_name||""),d(l.last_name||""),p(l.phone||""),f(l.email||""),j(l.age||""),b(l.gender||""),w(l.address||""),g(l.password||""),y(l.password||""))},[l]);const k=async s=>{var S;if(s.preventDefault(),!t.trim()){alert("Please fill all the required fields.");return}if(c!==P){alert("Passwords do not match.");return}const r=new FormData;r.append("id",_),r.append("first_name",t),r.append("last_name",i),r.append("phone",h),r.append("email",x),r.append("age",u),r.append("gender",N),r.append("address",v),r.append("password",c),F&&r.append("profile",F);try{const n=await fetch("/member/profile",{method:"POST",headers:{"X-CSRF-TOKEN":(S=document.querySelector('meta[name="csrf-token"]'))==null?void 0:S.getAttribute("content")},body:r}),E=await n.json();console.log(E),n.ok?(alert("Updated Successfully."),window.location.href="/admin/list-account"):alert("Failed to update profile.")}catch(n){console.error("Update failed:",n)}};return e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Update Personal Information"}),e.jsxs("form",{onSubmit:k,encType:"multipart/form-data",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"first_name",className:"col-sm-2 col-form-label",children:"First Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"first_name",name:"first_name",className:"form-control",value:t,onChange:s=>m(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"last_name",className:"col-sm-2 col-form-label",children:"Last Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"last_name",name:"last_name",className:"form-control",value:i,onChange:s=>d(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"col-sm-2 col-form-label",children:"Contact Number"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"number",id:"phone",name:"phone",className:"form-control",value:h,onChange:s=>p(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"email",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",value:x,onChange:s=>f(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"age",className:"col-sm-2 col-form-label",children:"Age"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"number",id:"age",name:"age",className:"form-control",value:u,min:"8",max:"120",onChange:s=>j(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"gender",className:"col-sm-2 col-form-label",children:"Gender"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("select",{id:"gender",name:"gender",className:"form-control",value:N,onChange:s=>b(s.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"address",className:"col-sm-2 col-form-label",children:"Address"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"text",id:"address",name:"address",className:"form-control",value:v,onChange:s=>w(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"profile",className:"col-sm-2 col-form-label",children:"Profile"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"file",id:"profile",name:"profile",className:"form-control",onChange:s=>A(s.target.files[0])})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"password",className:"col-sm-2 col-form-label",children:"Password"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:o?"text":"password",id:"password",name:"password",className:"form-control",value:c,onChange:s=>g(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"confirm_password",className:"col-sm-2 col-form-label",children:"Confirm Password"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:o?"text":"password",id:"confirm_password",name:"confirm_password",className:"form-control",value:P,onChange:s=>y(s.target.value)})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"showPassword",checked:o,onChange:()=>C(!o)}),e.jsx("label",{htmlFor:"showPassword",className:"form-check-label",children:"Show Password"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{className:"col-sm-2 col-form-label"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})]})})};function R(){return e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(D,{}),e.jsx(G,{}),e.jsxs("main",{id:"main",className:"main",children:[e.jsxs("div",{className:"pagetitle",children:[e.jsx("h1",{children:"Profile"}),e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Personal information"})]})})]}),e.jsx("section",{className:"section dashboard",children:e.jsx(M,{})})]}),e.jsx(H,{})]})}export{R as default};
