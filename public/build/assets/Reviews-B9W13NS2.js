import{X as p,r as n,j as e}from"./app-DrqDQnA4.js";import{M as F}from"./Head-6MoJf6Z7.js";import{R}from"./ReviewsBanner-RdsQbfhk.js";import{H as C,F as E}from"./Footer-DxFfM5G-.js";import"./Helmet-DiVuuYDF.js";function D(){const{reviews:f}=p().props,N=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}),S=s=>{const t=Math.min(s,5),l=5-t;return e.jsxs(e.Fragment,{children:[[...Array(t)].map((o,m)=>e.jsx("i",{className:"fa fa-star filled-star"},`filled-${m}`)),[...Array(l)].map((o,m)=>e.jsx("i",{className:"fa fa-star unfilled-star"},`unfilled-${m}`))]})},{cu_user_id:d}=p().props,[a,i]=n.useState({user_id:d,rate:"1",comment:""}),[h,c]=n.useState({}),[u,x]=n.useState(""),[b,v]=n.useState(!0),[j,g]=n.useState(!1),y=s=>{i({...a,[s.target.name]:s.target.value})},_=s=>{const r=s.target.value;i(t=>({...t,rate:r}))},w=async s=>{var r;s.preventDefault(),c({}),x(""),g(!0);try{const t=await fetch("/member/reviews",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify(a)});if(!t.ok){const o=await t.json();c({general:o.message||"Error submitting review!"});return}const l=await t.json();console.log(l),x("Your review has been successfully submitted."),i({user_id:d,rate:"1",comment:""}),v(!1)}catch(t){console.error("Error submitting review:",t),c({general:"Something went wrong. Please try again!"})}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"testimonial-section spad bg-color-000 ",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Testimonial"}),e.jsx("h2",{children:"Our client say"})]})})}),e.jsx("div",{className:"ts_slider owl-carousel",children:f.map(s=>e.jsx("div",{className:"ts_item",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12 text-center",children:[e.jsx("div",{className:"ti_pic",children:e.jsx("img",{src:s!=null&&s.profile?`/template/images/${s.profile}`:"/template/member/img/Portrait_Placeholder.png",alt:"profile"})}),e.jsxs("div",{className:"ti_text",children:[e.jsxs("p",{children:[s.comment,e.jsx("br",{}),e.jsx("p",{className:"review_date",children:N.format(new Date(s.created_at))})]}),e.jsxs("h5",{children:[s.first_name," ",s.last_name]}),e.jsx("div",{className:"tt-rating",children:S(s.rate)})]})]})})},s.id))})]})}),e.jsx("section",{className:"contact-section spad",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"col-lg-12 text-center",children:e.jsxs("div",{className:"leave-comment",children:[e.jsx("div",{className:"section-title contact-title text-center",children:e.jsx("h2",{children:"Write a Review"})}),h.general&&e.jsx("p",{className:"alert alert-danger",children:h.general}),u&&e.jsx("p",{className:"alert alert-success",children:u}),b&&e.jsxs("form",{onSubmit:w,children:[e.jsx("input",{type:"hidden",name:"user_id",value:a.user_id}),e.jsx("div",{className:"star-rating",children:[1,2,3,4,5].map(s=>e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"rate",value:s,checked:a.rate===String(s),onChange:_}),e.jsx("i",{className:`fa fa-star ${a.rate>=s?"checked":""}`})]},s))}),e.jsx("textarea",{placeholder:"Enter Your Comment...",required:!0,name:"comment",value:a.comment,onChange:y}),e.jsx("br",{}),e.jsx("button",{type:"submit",className:"color-white",disabled:j,children:j?"Submitting...":"Submit Review"})]})]})})})})]})}function P(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(C,{}),e.jsx(R,{}),e.jsx(D,{}),e.jsx(E,{})]})}export{P as default};
