import{X as p,r as f,j as t}from"./app-V5G9cFYl.js";import{A as b,a as j,b as x,c as y}from"./Footer-CBVqzZgc.js";import{h as o}from"./moment-C5S46NFB.js";import{X as g}from"./index.es-ubfs_mB6.js";import"./Helmet-DTuYPepi.js";const C=()=>{const{get_all_plans:w,id:v,get_all_members:i}=p().props,[n,l]=f.useState(""),c=[{name:"Member Name",selector:e=>`${e.first_name} ${e.last_name}`,sortable:!0},{name:"Plan Name",selector:e=>e.plan_name,sortable:!0},{name:"Start Date",selector:e=>e.start_date?o(e.start_date).format("MMMM D, YYYY"):"N/A",sortable:!0},{name:"End Date",selector:e=>e.end_date?o(e.end_date).format("MMMM D, YYYY"):"N/A",sortable:!0},{name:"Status",selector:e=>e.status,sortable:!0},{name:"Option",cell:e=>t.jsxs(t.Fragment,{children:[t.jsx("a",{href:`/admin/membership/view-membership-details/?id=${e.id}`,children:"View"}),e.status==="Pending"?t.jsxs(t.Fragment,{children:[" | ",t.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),d(e.id)},children:"Approve"})," | ",t.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),m(e.id)},children:"Cancel"})]}):null,e.status==="Cancelled"?t.jsxs(t.Fragment,{children:[" | ",t.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),h(e.id)},children:"Delete"})]}):null]})}],m=async e=>{var r;if(console.log("Cancelling membership with ID:",e),!!window.confirm("Are you sure you want to cancel this membership?"))try{(await fetch(`/member/account-history/member-plan-cancel?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({id:e})})).ok?(alert("Successfully canceled."),window.location.href="/admin/membership/list-of-members/"):alert("Failed to cancel membership.")}catch(a){console.error("Error submitting:",a)}},d=async e=>{var r;if(console.log("Approve membership with ID:",e),!!window.confirm("Are you sure you want to approve this membership?"))try{(await fetch(`/admin/membership/list-of-members/approve?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({id:e})})).ok?(alert("Successfully approved."),window.location.href="/admin/membership/list-of-members/"):alert("Failed to approve membership.")}catch(a){console.error("Error submitting:",a)}},h=async e=>{var r;if(console.log("Delete membership with ID:",e),!!window.confirm("Are you sure you want to delete this membership?"))try{(await fetch(`/member/account-history/member-plan-delete?id=${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")},body:JSON.stringify({id:e})})).ok?(alert("Successfully deleted."),window.location.href="/admin/membership/list-of-members/"):alert("Failed to delete membership.")}catch(a){console.error("Error submitting:",a)}},u=i.filter(e=>{const s=`${e.first_name} ${e.last_name}`.toLowerCase(),r=e.plan_name.toLowerCase(),a=e.status.toLowerCase();return s.includes(n.toLowerCase())||r.includes(n.toLowerCase())||a.includes(n.toLowerCase())});return t.jsx("div",{children:t.jsx("div",{className:"col-12",children:t.jsx("div",{className:"card recent-sales overflow-auto",children:t.jsxs("div",{className:"card-body",children:[t.jsx("h5",{className:"card-title",children:"List Of Members"}),t.jsx(g,{columns:c,data:u,pagination:!0,highlightOnHover:!0,subHeader:!0,subHeaderComponent:t.jsx("input",{type:"text",placeholder:"Search",onChange:e=>l(e.target.value),style:{width:"100%",margin:"0"}})})]})})})})};function _(){return t.jsxs(t.Fragment,{children:[t.jsx(b,{}),t.jsx(j,{}),t.jsx(x,{}),t.jsxs("main",{id:"main",className:"main",children:[t.jsxs("div",{className:"pagetitle",children:[t.jsx("h1",{children:"List of Members"}),t.jsx("nav",{children:t.jsxs("ol",{className:"breadcrumb",children:[t.jsx("li",{className:"breadcrumb-item",children:t.jsx("a",{href:"#",children:"Home"})}),t.jsx("li",{className:"breadcrumb-item active",children:"List of Members"})]})})]}),t.jsx("section",{className:"section dashboard",children:t.jsx(C,{})})]}),t.jsx(y,{})]})}export{_ as default};
