import{j as e,X as v,r as c}from"./app-DZ0vAk-i.js";import{M as _}from"./Head-CN3LtnRe.js";import{H as y,F as S}from"./Footer-Dbln17AP.js";import"./Helmet-Bf1uoCAg.js";function C(){return e.jsx(e.Fragment,{children:e.jsx("section",{className:"breadcrumb-section  ",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(/template/images/13.png)",backgroundSize:"cover",backgroundPosition:"center"},children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12 text-center",children:e.jsxs("div",{className:"breadcrumb-text",children:[e.jsx("h2",{children:"Profile"}),e.jsxs("div",{className:"bt-option",children:[e.jsx("a",{href:"#",children:"Home"}),e.jsx("span",{children:"Personal Information"})]})]})})})})})})}function F(){const{get_user_info:a,cu_user_id:u}=v().props,[s,h]=c.useState({id:u||"",first_name:"",last_name:"",email:"",phone:"",age:"",gender:"",address:"",profile:null,password:"",confirm_password:""}),[d,l]=c.useState({}),[p,x]=c.useState(""),[g,f]=c.useState(!0),[j,o]=c.useState(!1);c.useEffect(()=>{a&&h(t=>({...t,first_name:"",last_name:"",email:"",phone:"",age:"",gender:"",address:"",password:"",confirm_password:""}))},[a]);const n=t=>{const{name:i,value:m}=t.target;h(r=>({...r,[i]:m}))},N=t=>{h(i=>({...i,profile:t.target.files[0]}))},b=async t=>{var m;if(t.preventDefault(),l({}),x(""),o(!0),s.password||s.confirm_password){if(s.password.length<6){l({err_msg:"Password must be at least 6 characters long!"}),o(!1);return}if(s.password!==s.confirm_password){l({err_msg:"Passwords do not match!"}),o(!1);return}}else if(!s.profile&&!s.first_name&&!s.last_name&&!s.email&&!s.phone&&!s.age&&!s.gender&&!s.address&&!s.password&&!s.confirm_password){l({err_msg:"The form connot be emtpy!"}),o(!1);return}const i=new FormData;Object.keys(s).forEach(r=>{s[r]!==null&&s[r]!==""&&i.append(r,s[r])});try{const r=await fetch("/member/profile",{method:"POST",headers:{"X-CSRF-TOKEN":(m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content")},body:i}),w=await r.json();if(!r.ok){l({general:w.message||"Error submitting!"});return}x("Successfully updated! Refreshing the page in 3 seconds ..."),f(!1),setTimeout(()=>{window.location.href="/member/profile"},3e3)}catch(r){console.error("Error submitting:",r),l({general:"Something went wrong. Please try again!"})}finally{o(!1)}};return e.jsx("section",{className:"bmi-calculator-section spad",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-6",children:[e.jsxs("div",{className:"section-title chart-title",children:[e.jsx("span",{children:"Your real-time information"}),e.jsx("h2",{children:"Personal Information"})]}),e.jsx("div",{className:"chart-table",children:a&&e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name:"}),e.jsxs("th",{children:[a.first_name," ",a.last_name]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Email:"}),e.jsx("td",{children:a.email})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Contact Number:"}),e.jsx("td",{children:a.phone})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Age:"}),e.jsx("td",{children:a.age&&`${a.age} Years Old`})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Gender:"}),e.jsx("td",{children:a.gender})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"point",children:"Address:"}),e.jsx("td",{children:a.address})]})]})]})})]}),e.jsxs("div",{className:"col-lg-6",children:[e.jsxs("div",{className:"section-title chart-calculate-title",children:[e.jsx("span",{children:"Fill out the form to update your personal data."}),e.jsx("h2",{children:"UPDATE YOUR PROFILE"})]}),e.jsxs("div",{className:"chart-calculate-form",children:[d.general&&e.jsx("p",{className:"alert alert-danger",children:d.general}),p&&e.jsx("p",{className:"alert alert-success",children:p}),g&&e.jsx("form",{onSubmit:b,encType:"multipart/form-data",children:e.jsxs("div",{className:"row",children:[e.jsx("input",{type:"hidden",value:s.id,name:"id"}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{type:"text",placeholder:"First Name",name:"first_name",onChange:n})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{type:"text",placeholder:"Last Name",name:"last_name",onChange:n})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{type:"email",placeholder:"Email",name:"email",onChange:n})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{type:"number",placeholder:"Contact Number",name:"phone",onChange:n})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{type:"number",min:"8",max:"120",placeholder:"Age",name:"age",onChange:n})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{name:"gender",onChange:n,children:[e.jsx("option",{disabled:!0,children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})}),e.jsx("div",{className:"col-sm-12",children:e.jsx("input",{type:"text",placeholder:"Address",name:"address",onChange:n})}),e.jsx("div",{className:"col-sm-12",children:e.jsx("input",{type:"file",name:"profile",onChange:N})}),e.jsx("div",{className:"col-sm-12",children:e.jsx("input",{type:"password",placeholder:"Password",name:"password",onChange:n})}),e.jsxs("div",{className:"col-sm-12",children:[e.jsx("input",{type:"password",placeholder:"Confirm Password",name:"confirm_password",onChange:n}),d.err_msg&&e.jsx("p",{className:"alert alert-danger",children:d.err_msg})]}),e.jsx("div",{className:"col-lg-12",children:e.jsx("button",{type:"submit",className:"color-white",disabled:j,children:j?"Submitting...":"Submit"})})]})})]})]})]})})})}function D(){return e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(y,{}),e.jsx(C,{}),e.jsx(F,{}),e.jsx(S,{})]})}export{D as default};
