import{X as C,r as n,j as e}from"./app-BvqqgCsr.js";import{M}from"./Head-Dc0koQQK.js";import{H as N,F as w}from"./Footer-CaO18z-t.js";function v(){const{get_user_membership:d}=C().props,[i,a]=n.useState(1),[c]=n.useState(5),[o,m]=n.useState(""),l=d.filter(s=>s.plan_name.toLowerCase().includes(o.toLowerCase())),h=i*c,u=h-c,x=l.slice(u,h),j=Math.ceil(l.length/c),p=s=>a(s),[P,b]=n.useState(null),[O,y]=n.useState(null),f=async s=>{var t;b(s);try{const r=await fetch(`/member/account-history/member-plan-cancel?id=${s}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content")},body:JSON.stringify({plan_id:s})}),S=await r.json();r.ok&&(alert("Membership has been successfully cancelled."),window.location.href="/member/account-history")}catch(r){console.error("Error submitting:",r)}},g=async s=>{var t;y(s);try{const r=await fetch(`/member/account-history/member-plan-delete?id=${s}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content")},body:JSON.stringify({plan_id:s})}),S=await r.json();r.ok&&(alert("Membership has been successfully deleted."),window.location.href="/member/account-history")}catch(r){console.error("Error submitting:",r)}};return e.jsxs("section",{className:"gym-section",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Account History"}),e.jsx("h2",{children:"The data below shows your previous membership plans and class booking history."})]}),e.jsxs("div",{className:"gym-container",children:[e.jsxs("div",{className:"gym-column",children:[e.jsxs("div",{className:"Theader",children:[e.jsx("h2",{children:"Gym Membership Plan"}),e.jsx("input",{type:"text",placeholder:"Search",value:o,onChange:s=>{m(s.target.value),a(1)}})]}),e.jsxs("table",{className:"gym-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Plan"}),e.jsx("th",{children:"Total Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Option"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.plan_name}),e.jsxs("td",{children:["â‚±",parseInt(s.plan_price).toLocaleString()]}),e.jsx("td",{children:s.status}),e.jsxs("td",{children:[s.status==="Pending"&&e.jsx("a",{className:"cancelMembership",href:"#",onClick:t=>{t.preventDefault(),f(s.id)},children:"Cancel"}),s.status==="Cancelled"&&e.jsx("a",{className:"deleteMembership",href:"#",onClick:t=>{t.preventDefault(),g(s.id)},children:"Delete"}),e.jsx("a",{href:`/member/account-history/membership?id=${s.id}`,children:" View "})]})]},s.id))})]}),e.jsx("div",{className:"pagination",children:Array.from({length:j},(s,t)=>e.jsx("button",{onClick:()=>p(t+1),className:i===t+1?"active":"",children:t+1},t+1))})]}),e.jsxs("div",{className:"gym-column",children:[e.jsx("h2",{children:"Booking for Gym Class"}),e.jsxs("table",{className:"gym-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Trainor"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Option"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:"Lorem Ipsum"}),e.jsx("td",{children:"Lorem Ipsum"}),e.jsx("td",{children:"Lorem Ipsum"}),e.jsxs("td",{children:[e.jsx("a",{href:"",children:" Cancel "}),e.jsx("a",{href:"",children:" View "})]})]})})]})]})]})]})}function A(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsx(N,{}),e.jsx(v,{}),e.jsx(w,{})]})}export{A as default};
